<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libigl: include/igl/arap_dof.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libigl<span id="projectnumber">&#160;v2.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('arap__dof_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">arap_dof.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>"Fast Automatic Skinning Transformations" [Jacobson et al. 2012]  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="igl__inline_8h_source.html">igl_inline.h</a>&quot;</code><br />
<code>#include &lt;Eigen/Dense&gt;</code><br />
<code>#include &lt;Eigen/Sparse&gt;</code><br />
<code>#include &quot;<a class="el" href="ARAPEnergyType_8h_source.html">ARAPEnergyType.h</a>&quot;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;arap_dof.cpp&quot;</code><br />
</div>
<p><a href="arap__dof_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structigl_1_1ArapDOFData.html">igl::ArapDOFData&lt; LbsMatrixType, SSCALAR &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that contains fields for all precomputed data or data that needs to be remembered at update.  <a href="structigl_1_1ArapDOFData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceigl" id="r_namespaceigl"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceigl.html">igl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a26233fdaaff7c535c5cf9e54d58f6f80" id="r_a26233fdaaff7c535c5cf9e54d58f6f80"><td class="memTemplParams" colspan="2">template&lt;typename LbsMatrixType , typename SSCALAR &gt; </td></tr>
<tr class="memitem:a26233fdaaff7c535c5cf9e54d58f6f80"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceigl.html#a26233fdaaff7c535c5cf9e54d58f6f80">igl::arap_dof_precomputation</a> (const Eigen::MatrixXd &amp;V, const Eigen::MatrixXi &amp;F, const LbsMatrixType &amp;M, const Eigen::Matrix&lt; int, Eigen::Dynamic, 1 &gt; &amp;G, <a class="el" href="structigl_1_1ArapDOFData.html">ArapDOFData</a>&lt; LbsMatrixType, SSCALAR &gt; &amp;data)</td></tr>
<tr class="memdesc:a26233fdaaff7c535c5cf9e54d58f6f80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Precomputes the system to optimize for "Fast Automatic Skinning
Transformations" [Jacobson et al. 2012] skinning degrees of freedom optimization using as-rigid-as-possible energy.  <br /></td></tr>
<tr class="separator:a26233fdaaff7c535c5cf9e54d58f6f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acec31e2faca7eecae08c921a0430d0aa" id="r_acec31e2faca7eecae08c921a0430d0aa"><td class="memTemplParams" colspan="2">template&lt;typename LbsMatrixType , typename SSCALAR &gt; </td></tr>
<tr class="memitem:acec31e2faca7eecae08c921a0430d0aa"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceigl.html#acec31e2faca7eecae08c921a0430d0aa">igl::arap_dof_recomputation</a> (const Eigen::Matrix&lt; int, Eigen::Dynamic, 1 &gt; &amp;fixed_dim, const Eigen::SparseMatrix&lt; double &gt; &amp;A_eq, <a class="el" href="structigl_1_1ArapDOFData.html">ArapDOFData</a>&lt; LbsMatrixType, SSCALAR &gt; &amp;data)</td></tr>
<tr class="memdesc:acec31e2faca7eecae08c921a0430d0aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should always be called after arap_dof_precomputation, but may be called in between successive calls to arap_dof_update, recomputes precomputation given that there are only changes in free and fixed.  <br /></td></tr>
<tr class="separator:acec31e2faca7eecae08c921a0430d0aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31279c751ae3a7d24bc56dd4c8029d1e" id="r_a31279c751ae3a7d24bc56dd4c8029d1e"><td class="memTemplParams" colspan="2">template&lt;typename LbsMatrixType , typename SSCALAR &gt; </td></tr>
<tr class="memitem:a31279c751ae3a7d24bc56dd4c8029d1e"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceigl.html#a31279c751ae3a7d24bc56dd4c8029d1e">igl::arap_dof_update</a> (const <a class="el" href="structigl_1_1ArapDOFData.html">ArapDOFData</a>&lt; LbsMatrixType, SSCALAR &gt; &amp;data, const Eigen::Matrix&lt; double, Eigen::Dynamic, 1 &gt; &amp;B_eq, const Eigen::MatrixXd &amp;L0, const int max_iters, const double tol, Eigen::MatrixXd &amp;L)</td></tr>
<tr class="memdesc:a31279c751ae3a7d24bc56dd4c8029d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimizes the transformations attached to each weight function based on precomputed system.  <br /></td></tr>
<tr class="separator:a31279c751ae3a7d24bc56dd4c8029d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>"Fast Automatic Skinning Transformations" [Jacobson et al. 2012] </p>
<p>Arap DOF precomputation consists of two parts the computation. The first is that which depends solely on the mesh (V,F), the linear blend skinning weights (M) and the groups G. Then there's the part that depends on the previous precomputation and the list of free and fixed vertices.</p>
<h4><a class="anchor" id="autotoc_md2"></a>
Caller example:</h4>
<pre class="fragment">Once:
  arap_dof_precomputation(...)

Each frame:
  while(not satisfied)
    arap_dof_update(...)
  end
</pre><p> The code and variables differ from the description in Section 3 of "Fast
Automatic Skinning Transformations" by [Jacobson et al. 2012]</p>
<p>Here is a useful conversion table: </p><pre class="fragment">[article]                             [code]
S = \tilde{K} T                       S = CSM * Lsep
S --&gt; R                               S --&gt; R --shuffled--&gt; Rxyz
Gamma_solve RT = Pi_1 \tilde{K} RT    L_part1xyz = CSolveBlock1 * Rxyz 
Pi_1 \tilde{K}                        CSolveBlock1
Peq = [T_full; P_pos]                 
T_full                                B_eq_fix &lt;--- L0
P_pos                                 B_eq
Pi_2 * P_eq =                         Lpart2and3 = Lpart2 + Lpart3
  Pi_2_left T_full +                  Lpart3 = M_fullsolve(right) * B_eq_fix
  Pi_2_right P_pos                    Lpart2 = M_fullsolve(left) * B_eq
T = [Pi_1 Pi_2] [\tilde{K}TRT P_eq]   L = Lpart1 + Lpart2and3
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_d8545396a5fca4e99647f9a67174521c.html">igl</a></li><li class="navelem"><a class="el" href="arap__dof_8h.html">arap_dof.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
